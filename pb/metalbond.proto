syntax = "proto3";

package metalbond;
option go_package = "./pb";

enum IPVersion {
    IPv4 = 0;
    IPv6 = 1;
}

enum Action {
    ADD = 0;
    REMOVE = 1;
}

message Hello {
    bytes nodeId = 1;
    string hostname = 2;
    uint32 keepaliveInterval = 3;
    uint32 keepaliveTimeout = 4;
}

message Subscription {
    uint32 vni = 1;
}

message Update {
    uint32 vni = 1;
    Action action = 2;
    Route route = 3;
}

message Route {
    IPVersion ipVersion = 1;
    bytes prefix = 2;
    uint32 prefixLength = 3;
    bytes destinationAddress = 4;
    uint32 destinationVNI = 5;
    uint32 destinationParams = 6;
    bool natTarget = 7;
    uint32 natPortRangeFrom = 8;
    uint32 natPortRangeTo = 9;
}