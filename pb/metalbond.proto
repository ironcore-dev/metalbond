syntax = "proto3";

package metalbond;
option go_package = "./pb";

enum IPVersion {
    IPv4 = 0;
    IPv6 = 1;
}

enum Action {
    ADD = 0;
    REMOVE = 1;
}

message Hello {
    bytes nodeId = 1;
    string hostname = 2;
    uint32 keepaliveInterval = 3;
    uint32 keepaliveTimeout = 4;
}

message Subscription {
    uint32 vni = 1;
}

message Update {
    Action action = 1;
    Route route = 2;
}

message Route {
    uint32 vni = 1;
    IPVersion ipVersion = 2;
    bytes prefix = 3;
    uint32 prefixLength = 4;
    bytes destinationAddress = 5;
    uint32 destinationVNI = 6;
    uint32 destinationParams = 7;
    bool natTarget = 8;
    uint32 natPortRangeFrom = 9;
    uint32 natPortRangeTo = 10;
}