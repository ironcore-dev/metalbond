name: release 
on:
  release:
    types:
      - published
  push:
    tags:
    - 'v*'

jobs:
  build_deb:
    uses: ./.github/workflows/build-deb.yml
  publish_github:
    uses: ./.github/workflows/publish-to-github-releases.yml
    secrets:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  publish_gardenlinux_repo:
    uses: ./.github/workflows/publish-to-gardenlinux-repo.yml
    secrets:
      GITLAB_DEPLOY_KEY: ${{ secrets.GITLAB_DEPLOY_KEY }}

